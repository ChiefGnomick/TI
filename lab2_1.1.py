subsequence = "110001100111001010010101001010000100001100001000001110001001100001111000110011000100001000"

codes = {
    "000": " ",
    "100": "о",
    "1000": "е,ё",
    "1100": "а",
    "10000": "и",
    "10100": "т",
    "11000": "н",
    "11100": "с",
    "101000": "р",
    "101100": "в",
    "110000": "л",
    "110100": "к",
    "111000": "м",
    "111100": "д",
    "1010000": "п",
    "1010100": "у",
    "1011000": "я",
    "1011100": "ы",
    "1101000": "з",
    "1101100": "ь,ъ",
    "1110000": "б",
    "1110100": "г",
    "1111000": "ч",
    "1111100": "й",
    "10101000": "х",
    "10101100": "ж",
    "10110000": "ю",
    "10110100": "ш",
    "10111000": "ц",
    "10111100": "щ",
    "11010000": "э",
    "11011000": "ф"
}

def decode(s):
    if not s:
        return []
    for k, v in sorted(codes.items(), key=lambda x: len(x[0]), reverse=True):
        if s.startswith(k):
            tail = decode(s[len(k):])
            if tail is not None:
                return [(k, v, s[len(k):])] + tail
    return None

steps = decode(subsequence)

print("Исходная последовательность:", subsequence)
if steps:
    print("\nШаги декодирования:")
    for i, (code, char, remaining) in enumerate(steps, 1):
        print(f"{i:2}. {code} -> {char:<4} | Остаток: {remaining if remaining else '—'}")
    print("\nРезультат:", "".join(char.split(',')[0] for _, char, _ in steps))
else:
    print("Ошибка: не удалось декодировать всю последовательность")
